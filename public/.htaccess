# Configuración de PHP (mantener existente)
php_flag display_errors Off
php_flag log_errors On
php_value error_log /home/uXXXXXXX/public_html/php-error.log

# Configuración para URLs limpias
RewriteEngine On

# Excluir específicamente carpetas que NO deben ser reescritas
RewriteRule ^api/ - [L]
RewriteRule ^assets/ - [L]
RewriteRule ^uploads/ - [L]
RewriteRule ^includes/ - [L]

# Redirigir URLs con .php a URLs limpias (301 permanente)
# Solo para archivos que no están en carpetas excluidas
RewriteCond %{THE_REQUEST} \s/+([^/\s]+)\.php[\s?] [NC]
RewriteCond %1 !^(api|assets|uploads|includes)/
RewriteRule ^ /%1 [R=301,L]

# Manejar la página de inicio primero
RewriteRule ^$ index.php [L]

# Reescribir URLs limpias a archivos .php
# Solo si no es un archivo o directorio existente
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# Solo para URLs de un nivel (sin barras adicionales)
RewriteRule ^([^/]+)/?$ $1.php [L]

# Proteger archivos sensibles
<Files "*.log">
    Order allow,deny
    Deny from all
</Files>

<Files ".htaccess">
    Order allow,deny
    Deny from all
</Files>

# Configuración de caché para assets estáticos
# <IfModule mod_expires.c>
#     ExpiresActive On
#     ExpiresByType text/css "access plus 1 month"
#     ExpiresByType application/javascript "access plus 1 month"
#     ExpiresByType image/png "access plus 1 month"
#     ExpiresByType image/jpg "access plus 1 month"
#     ExpiresByType image/jpeg "access plus 1 month"
#     ExpiresByType image/gif "access plus 1 month"
#     ExpiresByType image/svg+xml "access plus 1 month"
# </IfModule>